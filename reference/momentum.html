<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Contribution of Individual Variables to Time Series Dissimilarity — momentum • distantia</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Contribution of Individual Variables to Time Series Dissimilarity — momentum"><meta name="description" content='This function measures the contribution of individual variables to the dissimilarity between pairs of time series to help answer the question what makes two time series more or less similar?
Three key values are required to assess individual variable contributions:
psi: dissimilarity when all variables are considered.
psi_only_with: dissimilarity when using only the target variable.
psi_without: dissimilarity when removing the target variable.


The values psi_only_with and psi_without can be computed in two different ways defined by the argument robust.
robust = FALSE: This method replicates the importance algorithm released with the first version of the package, and it is only recommended when the goal to compare new results with previous studies. It normalizes psi_only_with and psi_without using the least cost path obtained from the individual variable. As different variables may have different least cost paths for the same time series, normalization values may change from variable to variable, making individual importance scores harder to compare.
robust = TRUE (default, recommended): This a novel version of the importance algorithm that yields more stable and comparable solutions. It uses the least cost path of the complete time series to normalize psi_only_with and psi_without, making importance scores of separate variables fully comparable.


The individual importance score of each variable (column "importance" in the output data frame) is based on different expressions depending on the robust argument, even when lock_step = TRUE:
robust = FALSE: Importance is computed as ((psi - psi_without) * 100)/psi and interpreted as "change in similarity when a variable is removed".
robust = TRUE: Importance is computed as ((psi_only_with - psi_without) * 100)/psi and interpreted as "relative dissimilarity induced by the variable expressed as a percentage".


In either case, positive values indicate that the variable contributes to dissimilarity, while negative values indicate a net contribution to similarity.
This function allows computing dissimilarity between pairs of time series using different combinations of arguments at once. For example, when the argument distance is set to c("euclidean", "manhattan"), the output data frame will show two dissimilarity scores for each pair of time series, one based on euclidean distances, and another based on manhattan distances. The same happens for most other parameters.
This function supports a parallelization setup via future::plan(), and progress bars provided by the package progressr.'><meta property="og:description" content='This function measures the contribution of individual variables to the dissimilarity between pairs of time series to help answer the question what makes two time series more or less similar?
Three key values are required to assess individual variable contributions:
psi: dissimilarity when all variables are considered.
psi_only_with: dissimilarity when using only the target variable.
psi_without: dissimilarity when removing the target variable.


The values psi_only_with and psi_without can be computed in two different ways defined by the argument robust.
robust = FALSE: This method replicates the importance algorithm released with the first version of the package, and it is only recommended when the goal to compare new results with previous studies. It normalizes psi_only_with and psi_without using the least cost path obtained from the individual variable. As different variables may have different least cost paths for the same time series, normalization values may change from variable to variable, making individual importance scores harder to compare.
robust = TRUE (default, recommended): This a novel version of the importance algorithm that yields more stable and comparable solutions. It uses the least cost path of the complete time series to normalize psi_only_with and psi_without, making importance scores of separate variables fully comparable.


The individual importance score of each variable (column "importance" in the output data frame) is based on different expressions depending on the robust argument, even when lock_step = TRUE:
robust = FALSE: Importance is computed as ((psi - psi_without) * 100)/psi and interpreted as "change in similarity when a variable is removed".
robust = TRUE: Importance is computed as ((psi_only_with - psi_without) * 100)/psi and interpreted as "relative dissimilarity induced by the variable expressed as a percentage".


In either case, positive values indicate that the variable contributes to dissimilarity, while negative values indicate a net contribution to similarity.
This function allows computing dissimilarity between pairs of time series using different combinations of arguments at once. For example, when the argument distance is set to c("euclidean", "manhattan"), the output data frame will show two dissimilarity scores for each pair of time series, one based on euclidean distances, and another based on manhattan distances. The same happens for most other parameters.
This function supports a parallelization setup via future::plan(), and progress bars provided by the package progressr.'><meta property="og:image" content="https://blasbenito.github.io/distantia/logo.png"><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">distantia</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/dynamic_time_warping_and_lock_step.html">Dynamic Time Warping vs Lock-Step</a></li>
    <li><a class="dropdown-item" href="../articles/time_series_lists.html">Handling Time Series Lists</a></li>
    <li><a class="dropdown-item" href="../articles/mapping_dissimilarity.html">Mapping Time Series Dissimilarity</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Original Paper</h6></li>
    <li><a class="external-link dropdown-item" href="https://nsojournals.onlinelibrary.wiley.com/doi/full/10.1111/ecog.04895">Benito &amp; Birks 2020 (Ecography)</a></li>
    <li><a class="dropdown-item" href="../articles/distantia_in_the_wild.html">In The Wild</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BlasBenito/distantia/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Contribution of Individual Variables to Time Series Dissimilarity</h1>
      <small class="dont-index">Source: <a href="https://github.com/BlasBenito/distantia/blob/main/R/momentum.R" class="external-link"><code>R/momentum.R</code></a></small>
      <div class="d-none name"><code>momentum.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function measures the contribution of individual variables to the dissimilarity between pairs of time series to help answer the question <em>what makes two time series more or less similar?</em></p>
<p>Three key values are required to assess individual variable contributions:</p><ul><li><p><strong>psi</strong>: dissimilarity when all variables are considered.</p></li>
<li><p><strong>psi_only_with</strong>: dissimilarity when using only the target variable.</p></li>
<li><p><strong>psi_without</strong>: dissimilarity when removing the target variable.</p></li>
</ul><p>The values <code>psi_only_with</code> and <code>psi_without</code> can be computed in two different ways defined by the argument <code>robust</code>.</p><ul><li><p><code>robust = FALSE</code>: This method replicates the importance algorithm released with the first version of the package, and it is only recommended when the goal to compare new results with previous studies. It normalizes <code>psi_only_with</code> and <code>psi_without</code> using the least cost path obtained from the individual variable. As different variables may have different least cost paths for the same time series, normalization values may change from variable to variable, making individual importance scores harder to compare.</p></li>
<li><p><code>robust = TRUE</code> (default, recommended): This a novel version of the importance algorithm that yields more stable and comparable solutions. It uses the least cost path of the complete time series to normalize <code>psi_only_with</code> and <code>psi_without</code>, making importance scores of separate variables fully comparable.</p></li>
</ul><p>The individual importance score of each variable (column "importance" in the output data frame) is based on different expressions depending on the <code>robust</code> argument, even when <code>lock_step = TRUE</code>:</p><ul><li><p><code>robust = FALSE</code>: Importance is computed as <code>((psi - psi_without) * 100)/psi</code> and interpreted as "change in similarity when a variable is removed".</p></li>
<li><p><code>robust = TRUE</code>: Importance is computed as <code>((psi_only_with - psi_without) * 100)/psi</code> and interpreted as "relative dissimilarity induced by the variable expressed as a percentage".</p></li>
</ul><p>In either case, positive values indicate that the variable contributes to dissimilarity, while negative values indicate a net contribution to similarity.</p>
<p>This function allows computing dissimilarity between pairs of time series using different combinations of arguments at once. For example, when the argument <code>distance</code> is set to <code>c("euclidean", "manhattan")</code>, the output data frame will show two dissimilarity scores for each pair of time series, one based on euclidean distances, and another based on manhattan distances. The same happens for most other parameters.</p>
<p>This function supports a parallelization setup via <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code>, and progress bars provided by the package <a href="https://CRAN.R-project.org/package=progressr" class="external-link">progressr</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">momentum</span><span class="op">(</span></span>
<span>  tsl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  distance <span class="op">=</span> <span class="st">"euclidean"</span>,</span>
<span>  diagonal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bandwidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  lock_step <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  robust <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-tsl">tsl<a class="anchor" aria-label="anchor" href="#arg-tsl"></a></dt>
<dd><p>(required, time series list) list of zoo time series. Default: NULL</p></dd>


<dt id="arg-distance">distance<a class="anchor" aria-label="anchor" href="#arg-distance"></a></dt>
<dd><p>(optional, character vector) name or abbreviation of the distance method. Valid values are in the columns "names" and "abbreviation" of the dataset <a href="distances.html">distances</a>. Default: "euclidean".</p></dd>


<dt id="arg-diagonal">diagonal<a class="anchor" aria-label="anchor" href="#arg-diagonal"></a></dt>
<dd><p>(optional, logical vector). If TRUE, diagonals are included in the dynamic time warping computation. Default: TRUE</p></dd>


<dt id="arg-bandwidth">bandwidth<a class="anchor" aria-label="anchor" href="#arg-bandwidth"></a></dt>
<dd><p>(optional, numeric) Proportion of space at each side of the cost matrix diagonal (aka <em>Itakura parallelogram</em>) defining a valid region for dynamic time warping, used to control the flexibility of the warping path. This method prevents degenerate alignments due to differences in magnitude between time series when the data is not properly scaled. If <code>1</code> (default), DTW is unconstrained. If <code>0</code>, DTW is fully constrained and the warping path follows the matrix diagonal. Recommended values may vary depending on the nature of the data. Ignored if <code>lock_step = TRUE</code>. Default: 1.</p></dd>


<dt id="arg-lock-step">lock_step<a class="anchor" aria-label="anchor" href="#arg-lock-step"></a></dt>
<dd><p>(optional, logical vector) If TRUE, time series captured at the same times are compared sample wise (with no dynamic time warping). Requires time series in argument <code>tsl</code> to be fully aligned, or it will return an error. Default: FALSE.</p></dd>


<dt id="arg-robust">robust<a class="anchor" aria-label="anchor" href="#arg-robust"></a></dt>
<dd><p>(required, logical). If TRUE (default), importance scores are computed using the least cost path of the complete time series as reference. Setting it to FALSE allows to replicate importance scores of the previous versions of this package. This option is irrelevant when <code>lock_step = TRUE</code>. Default: TRUE</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data frame:</p><ul><li><p><code>x</code>: name of the time series <code>x</code>.</p></li>
<li><p><code>y</code>: name of the time series <code>y</code>.</p></li>
<li><p><code>psi</code>: psi score of <code>x</code> and <code>y</code>.</p></li>
<li><p><code>variable</code>: name of the individual variable.</p></li>
<li><p><code>importance</code>: importance score of the variable.</p></li>
<li><p><code>effect</code>: interpretation of the "importance" column, with the values "increases similarity" and "decreases similarity".</p></li>
<li><p><code>psi_only_with</code>: psi score of the variable.</p></li>
<li><p><code>psi_without</code>: psi score without the variable.</p></li>
<li><p><code>psi_difference</code>: difference between <code>psi_only_with</code> and <code>psi_without</code>.</p></li>
<li><p><code>distance</code>: name of the distance metric.</p></li>
<li><p><code>diagonal</code>: value of the argument <code>diagonal</code>.</p></li>
<li><p><code>lock_step</code>: value of the argument <code>lock_step</code>.</p></li>
<li><p><code>robust</code>: value of the argument <code>robust</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other momentum:
<code><a href="momentum_dtw.html">momentum_dtw</a>()</code>,
<code><a href="momentum_ls.html">momentum_ls</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#progress bar</span></span></span>
<span class="r-in"><span><span class="co"># progressr::handlers(global = TRUE)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_initialize.html">tsl_initialize</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu">distantia</span><span class="fu">::</span><span class="va"><a href="albatross.html">albatross</a></span>,</span></span>
<span class="r-in"><span>  name_column <span class="op">=</span> <span class="st">"name"</span>,</span></span>
<span class="r-in"><span>  time_column <span class="op">=</span> <span class="st">"time"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_transform.html">tsl_transform</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    f <span class="op">=</span> <span class="va">f_scale_global</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">momentum</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  lock_step <span class="op">=</span> <span class="cn">TRUE</span> <span class="co">#to speed-up example</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#focus on important columns</span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"x"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"variable"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"importance"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"effect"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       x    y    variable  importance               effect</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  X132 X134           x  245.695881 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  X132 X134           y  220.966901 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  X132 X134       speed  -39.219394 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  X132 X134 temperature   20.212756 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  X132 X134     heading  -64.096435 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  X132 X136           x  167.362857 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  X132 X136           y  179.922707 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  X132 X136       speed  -57.142101 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  X132 X136 temperature  269.816263 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 X132 X136     heading -101.695710 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 X132 X153           x  420.716727 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 X132 X153           y  193.801511 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 X132 X153       speed  -42.230768 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 X132 X153 temperature  -17.262427 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 X132 X153     heading  -79.506957 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 X134 X136           x  172.225082 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 X134 X136           y  187.120048 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 X134 X136       speed  -61.142823 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 X134 X136 temperature  253.045256 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 X134 X136     heading  -91.739170 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 X134 X153           x  569.430986 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 X134 X153           y  163.217249 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 X134 X153       speed  -46.222266 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 X134 X153 temperature    4.694732 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 X134 X153     heading  -88.399757 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 X136 X153           x  507.615365 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 X136 X153           y   56.695744 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 X136 X153       speed  -65.451610 increases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 X136 X153 temperature  240.905381 decreases similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 X136 X153     heading -116.246193 increases similarity</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

