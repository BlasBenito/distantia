<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tranform Data to a Time Series List — tsl_initialize • distantia</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Tranform Data to a Time Series List — tsl_initialize"><meta name="description" content='Most functions in this package take a time series list (or tsl for short) as main input. A tsl is a list of zoo time series objects (see zoo::zoo()). There is not a formal class for tsl objects, but there are requirements these objects must follow to ensure the stability of the package functionalities (see tsl_diagnose()). These requirements are:
There are no NA, Inf, -Inf, or NaN cases in the zoo objects (see tsl_count_NA() and tsl_handle_NA()).
All zoo objects must have at least one common column name to allow time series comparison (see tsl_colnames_get()).
All zoo objects have a character attribute "name" identifying the object. This attribute is not part of the zoo class, but the package ensures that this attribute is not lost during data manipulations.
Each element of the time series list is named after the zoo object it contains (see tsl_names_get(), tsl_names_set() and tsl_names_clean()).
The time series list contains two zoo objects or more.


The function tsl_initialize() (and its alias tsl_init()) is designed to convert the following data structures to a time series list:

Long data frame: with an ID column to separate time series, and a time column that can be of the classes "Date", "POSIXct", "integer", or "numeric". The resulting zoo objects and list elements are named after the values in the ID column.
Wide data frame: each column is a time series representing the same variable observed at the same time in different places. Each column is converted to a separate zoo object and renamed.
List of vectors: an object like list(a = runif(10), b = runif(10)) is converted to a time series list with as many zoo objects as vectors are defined in the original list.
List of matrices: a list containing matrices, such as list(a = matrix(runif(30), 10, 3), b = matrix(runif(36), 12, 3)).
List of zoo objects: a list with zoo objects, such as list(a = zoo_simulate(), b = zoo_simulate())

'><meta property="og:description" content='Most functions in this package take a time series list (or tsl for short) as main input. A tsl is a list of zoo time series objects (see zoo::zoo()). There is not a formal class for tsl objects, but there are requirements these objects must follow to ensure the stability of the package functionalities (see tsl_diagnose()). These requirements are:
There are no NA, Inf, -Inf, or NaN cases in the zoo objects (see tsl_count_NA() and tsl_handle_NA()).
All zoo objects must have at least one common column name to allow time series comparison (see tsl_colnames_get()).
All zoo objects have a character attribute "name" identifying the object. This attribute is not part of the zoo class, but the package ensures that this attribute is not lost during data manipulations.
Each element of the time series list is named after the zoo object it contains (see tsl_names_get(), tsl_names_set() and tsl_names_clean()).
The time series list contains two zoo objects or more.


The function tsl_initialize() (and its alias tsl_init()) is designed to convert the following data structures to a time series list:

Long data frame: with an ID column to separate time series, and a time column that can be of the classes "Date", "POSIXct", "integer", or "numeric". The resulting zoo objects and list elements are named after the values in the ID column.
Wide data frame: each column is a time series representing the same variable observed at the same time in different places. Each column is converted to a separate zoo object and renamed.
List of vectors: an object like list(a = runif(10), b = runif(10)) is converted to a time series list with as many zoo objects as vectors are defined in the original list.
List of matrices: a list containing matrices, such as list(a = matrix(runif(30), 10, 3), b = matrix(runif(36), 12, 3)).
List of zoo objects: a list with zoo objects, such as list(a = zoo_simulate(), b = zoo_simulate())

'><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">distantia</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/psi_dissimilarity_metric.html">The Psi Dissimilarity Metric</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Original Paper</h6></li>
    <li><a class="external-link dropdown-item" href="https://nsojournals.onlinelibrary.wiley.com/doi/full/10.1111/ecog.04895">Benito &amp; Birks 2020 (Ecography)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BlasBenito/distantia/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Tranform Data to a Time Series List</h1>
      <small class="dont-index">Source: <a href="https://github.com/BlasBenito/distantia/blob/main/R/tsl_initialize.R" class="external-link"><code>R/tsl_initialize.R</code></a></small>
      <div class="d-none name"><code>tsl_initialize.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Most functions in this package take a <strong>time series list</strong> (or <strong>tsl</strong> for short) as main input. A <code>tsl</code> is a list of zoo time series objects (see <code><a href="https://rdrr.io/pkg/zoo/man/zoo.html" class="external-link">zoo::zoo()</a></code>). There is not a formal class for <code>tsl</code> objects, but there are requirements these objects must follow to ensure the stability of the package functionalities (see <code><a href="tsl_diagnose.html">tsl_diagnose()</a></code>). These requirements are:</p><ul><li><p>There are no NA, Inf, -Inf, or NaN cases in the zoo objects (see <code><a href="tsl_count_NA.html">tsl_count_NA()</a></code> and <code><a href="tsl_handle_NA.html">tsl_handle_NA()</a></code>).</p></li>
<li><p>All zoo objects must have at least one common column name to allow time series comparison (see <code><a href="tsl_colnames_get.html">tsl_colnames_get()</a></code>).</p></li>
<li><p>All zoo objects have a character attribute "name" identifying the object. This attribute is not part of the zoo class, but the package ensures that this attribute is not lost during data manipulations.</p></li>
<li><p>Each element of the time series list is named after the zoo object it contains (see <code><a href="tsl_names_get.html">tsl_names_get()</a></code>, <code><a href="tsl_names_set.html">tsl_names_set()</a></code> and <code><a href="tsl_names_clean.html">tsl_names_clean()</a></code>).</p></li>
<li><p>The time series list contains two zoo objects or more.</p></li>
</ul><p>The function <code>tsl_initialize()</code> (and its alias <code>tsl_init()</code>) is designed to convert the following data structures to a time series list:</p>
<ul><li><p>Long data frame: with an ID column to separate time series, and a time column that can be of the classes "Date", "POSIXct", "integer", or "numeric". The resulting zoo objects and list elements are named after the values in the ID column.</p></li>
<li><p>Wide data frame: each column is a time series representing the same variable observed at the same time in different places. Each column is converted to a separate zoo object and renamed.</p></li>
<li><p>List of vectors: an object like <code>list(a = runif(10), b = runif(10))</code> is converted to a time series list with as many zoo objects as vectors are defined in the original list.</p></li>
<li><p>List of matrices: a list containing matrices, such as <code>list(a = matrix(runif(30), 10, 3), b = matrix(runif(36), 12, 3))</code>.</p></li>
<li><p>List of zoo objects: a list with zoo objects, such as <code>list(a = zoo_simulate(), b = zoo_simulate())</code></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tsl_initialize</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_column <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_column <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lock_step <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tsl_init</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_column <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_column <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lock_step <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>(required, list or data frame) Matrix or data frame in long format, list of vectors, list of matrices, or list of zoo objects. Default: NULL.</p></dd>


<dt id="arg-id-column">id_column<a class="anchor" aria-label="anchor" href="#arg-id-column"></a></dt>
<dd><p>(optional, column name) Grouping column separating time series. Values in this column are used as time series names. Default: NULL</p></dd>


<dt id="arg-time-column">time_column<a class="anchor" aria-label="anchor" href="#arg-time-column"></a></dt>
<dd><p>(optional if <code>lock_step = FALSE</code>, and required otherwise, character string) Name of the column representing time, if any. Default: NULL.</p></dd>


<dt id="arg-lock-step">lock_step<a class="anchor" aria-label="anchor" href="#arg-lock-step"></a></dt>
<dd><p>(optional, logical) If TRUE, all input sequences are subsetted to their common times according to the values in <code>time_column</code>.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>(optional, logical) If TRUE, all messages are suppressed. Default: FALSE</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>list of matrices</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other data_preparation:
<code><a href="tsl_colnames_clean.html">tsl_colnames_clean</a>()</code>,
<code><a href="tsl_colnames_set.html">tsl_colnames_set</a>()</code>,
<code><a href="tsl_diagnose.html">tsl_diagnose</a>()</code>,
<code><a href="tsl_handle_NA.html">tsl_handle_NA</a>()</code>,
<code><a href="tsl_names_clean.html">tsl_names_clean</a>()</code>,
<code><a href="tsl_names_set.html">tsl_names_set</a>()</code>,
<code><a href="tsl_names_test.html">tsl_names_test</a>()</code>,
<code><a href="tsl_repair.html">tsl_repair</a>()</code>,
<code><a href="tsl_time_class_set.html">tsl_time_class_set</a>()</code>,
<code><a href="zoo_name_clean.html">zoo_name_clean</a>()</code>,
<code><a href="zoo_name_get.html">zoo_name_get</a>()</code>,
<code><a href="zoo_name_set.html">zoo_name_set</a>()</code>,
<code><a href="zoo_to_tsl.html">zoo_to_tsl</a>()</code>,
<code><a href="zoo_vector_to_matrix.html">zoo_vector_to_matrix</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#long data frame</span></span></span>
<span class="r-in"><span><span class="co">#---------------------</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fagus_dynamics"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#id_column is site</span></span></span>
<span class="r-in"><span><span class="co">#time column is date</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">fagus_dynamics</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	648 obs. of  5 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ site       : chr  "Spain" "Spain" "Spain" "Spain" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ date       : Date, format: "2001-01-01" "2001-02-01" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ evi        : num  0.193 0.242 0.276 0.396 0.445 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ rainfall   : num  199.8 50.6 170.9 62.7 52.7 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ temperature: num  8.1 7.8 11 10.4 14.1 17.6 18.3 19.6 16.3 16.1 ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#to tsl</span></span></span>
<span class="r-in"><span><span class="co">#each group in id_column is a different time series</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu">tsl_initialize</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">fagus_dynamics</span>,</span></span>
<span class="r-in"><span>  id_column <span class="op">=</span> <span class="st">"site"</span>,</span></span>
<span class="r-in"><span>  time_column <span class="op">=</span> <span class="st">"date"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#check validity (no messages or errors if valid)</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_diagnose.html">tsl_diagnose</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#class of contained objects</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">tsl</span>, FUN <span class="op">=</span> <span class="va">class</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Germany</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "zoo"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Spain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "zoo"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Sweden</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "zoo"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#get list and zoo names (between double quotes)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_names_get.html">tsl_names_get</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  zoo <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Germany     Spain    Sweden </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Germany"   "Spain"  "Sweden" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#plot tsl</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#list of zoo objects</span></span></span>
<span class="r-in"><span><span class="co">#--------------------</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="zoo_simulate.html">zoo_simulate</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="zoo_simulate.html">zoo_simulate</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu">tsl_initialize</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="va">x</span>,</span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="va">y</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'A' to 'x'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'A' to 'y'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#plot</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#wide data frame</span></span></span>
<span class="r-in"><span><span class="co">#--------------------</span></span></span>
<span class="r-in"><span><span class="co">#wide data frame</span></span></span>
<span class="r-in"><span><span class="co">#each column is same variable in different places</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/reshape.html" class="external-link">reshape</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">fagus_dynamics</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"site"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"date"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"evi"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  timevar <span class="op">=</span> <span class="st">"site"</span>,</span></span>
<span class="r-in"><span>  idvar <span class="op">=</span> <span class="st">"date"</span>,</span></span>
<span class="r-in"><span>  direction <span class="op">=</span> <span class="st">"wide"</span>,</span></span>
<span class="r-in"><span>  sep <span class="op">=</span> <span class="st">"_"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	216 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ date       : Date, format: "2001-01-01" "2001-02-01" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ evi_Spain  : num  0.193 0.242 0.276 0.396 0.445 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ evi_Germany: num  0.354 0.294 0.345 0.392 0.688 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ evi_Sweden : num  0.183 0.182 0.215 0.237 0.519 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "reshapeWide")=List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ v.names: NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ timevar: chr "site"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ idvar  : chr "date"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ times  : chr [1:3] "Spain" "Germany" "Sweden"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ varying: chr [1, 1:3] "evi_Spain" "evi_Germany" "evi_Sweden"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#to tsl</span></span></span>
<span class="r-in"><span><span class="co">#key assumptions:</span></span></span>
<span class="r-in"><span><span class="co">#all columns but "date" represent</span></span></span>
<span class="r-in"><span><span class="co">#the same variable in different places</span></span></span>
<span class="r-in"><span><span class="co">#all time series are of the same length</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu">tsl_initialize</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  time_column <span class="op">=</span> <span class="st">"date"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#colnames are forced to be the same...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_colnames_get.html">tsl_colnames_get</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $evi_Spain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "x"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $evi_Germany</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "x"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $evi_Sweden</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "x"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#...but can be changed</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_colnames_set.html">tsl_colnames_set</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  names <span class="op">=</span> <span class="st">"evi"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_colnames_get.html">tsl_colnames_get</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $evi_Spain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "evi"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $evi_Germany</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "evi"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $evi_Sweden</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "evi"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#plot</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#list of vectors</span></span></span>
<span class="r-in"><span><span class="co">#---------------------</span></span></span>
<span class="r-in"><span><span class="co">#create list of vectors</span></span></span>
<span class="r-in"><span><span class="va">vector_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">70</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#to tsl</span></span></span>
<span class="r-in"><span><span class="co">#key assumptions:</span></span></span>
<span class="r-in"><span><span class="co">#all vectors represent the same variable</span></span></span>
<span class="r-in"><span><span class="co">#in different places</span></span></span>
<span class="r-in"><span><span class="co">#time series can be of different lengths</span></span></span>
<span class="r-in"><span><span class="co">#no time column, integer indices are used as time</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu">tsl_initialize</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">vector_list</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#plot</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#list of matrices</span></span></span>
<span class="r-in"><span><span class="co">#-------------------------</span></span></span>
<span class="r-in"><span><span class="co">#create list of matrices</span></span></span>
<span class="r-in"><span><span class="va">matrix_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">10</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">80</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">20</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#to tsl</span></span></span>
<span class="r-in"><span><span class="co">#key assumptions:</span></span></span>
<span class="r-in"><span><span class="co">#each matrix represents a multivariate time series</span></span></span>
<span class="r-in"><span><span class="co">#in a different place</span></span></span>
<span class="r-in"><span><span class="co">#all multivariate time series have the same columns</span></span></span>
<span class="r-in"><span><span class="co">#no time column, integer indices are used as time</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu">tsl_initialize</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">matrix_list</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#check column names</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_colnames_get.html">tsl_colnames_get</a></span><span class="op">(</span>tsl <span class="op">=</span> <span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "x1" "x2" "x3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "x1" "x2" "x3" "x4"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#remove exclusive column</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_subset.html">tsl_subset</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  shared_cols <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_colnames_get.html">tsl_colnames_get</a></span><span class="op">(</span>tsl <span class="op">=</span> <span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "x1" "x2" "x3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "x1" "x2" "x3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#plot</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#list of zoo objects</span></span></span>
<span class="r-in"><span><span class="co">#-------------------------</span></span></span>
<span class="r-in"><span><span class="va">zoo_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  a <span class="op">=</span> <span class="fu"><a href="zoo_simulate.html">zoo_simulate</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  b <span class="op">=</span> <span class="fu"><a href="zoo_simulate.html">zoo_simulate</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#looks like a time series list! But...</span></span></span>
<span class="r-in"><span><span class="va">zoo_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_diagnose.html">tsl_diagnose</a></span><span class="op">(</span>tsl <span class="op">=</span> <span class="va">zoo_list</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#let's set the names</span></span></span>
<span class="r-in"><span><span class="va">zoo_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_names_set.html">tsl_names_set</a></span><span class="op">(</span>tsl <span class="op">=</span> <span class="va">zoo_list</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'A' to 'a'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'A' to 'b'.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#check again: it's now a valid time series list</span></span></span>
<span class="r-in"><span><span class="va">zoo_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_diagnose.html">tsl_diagnose</a></span><span class="op">(</span>tsl <span class="op">=</span> <span class="va">zoo_list</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#to do all this in one go:</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu">tsl_initialize</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    a <span class="op">=</span> <span class="fu"><a href="zoo_simulate.html">zoo_simulate</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    b <span class="op">=</span> <span class="fu"><a href="zoo_simulate.html">zoo_simulate</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'A' to 'a'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'A' to 'b'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#plot</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

