<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Aggregate Cases in Time Series Lists — tsl_aggregate • distantia</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Aggregate Cases in Time Series Lists — tsl_aggregate"><meta name="description" content='Function to aggregate zoo objects within a time series list.
This function supports progress bars generated by the progressr package. See examples.
This function also accepts a parallelization setup via future::plan(), but it might only be worth it for large time series lists.
Objective
Time series aggregation involves grouping observations and summarizing group values with a statistical function. This operation is useful to:
Decrease (downsampling) the temporal resolution of a time series.
Highlight particular states of a time series over time. For example, a daily temperature series can be aggregated by month using max to represent the highest temperatures each month.
Transform irregular time series into regular.


This function aggregates time series lists with overlapping times. Please check such overlap by assessing the columns "begin" and "end " of the data frame resulting from df &amp;lt;- tsl_time(tsl = tsl). Aggregation will be limited by the shortest time series in your time series list. To aggregate non-overlapping time series, please subset the individual components of tsl one by one either using tsl_subset() or the syntax tsl = my_tsl[[i]].
Methods
Any function returning a single number from a numeric vector can be used to aggregate a time series list. Quoted and unquoted function names can be used. Additional arguments to these functions can be passed via the argument .... Typical examples are:

mean or "mean": see mean().
median or "median": see stats::median().
quantile or "quantile": see stats::quantile().
min or "min": see min().
max or "max": see max().
sd or "sd": to compute standard deviation, see stats::sd().
var or "var": to compute the group variance, see stats::var().
length or "length": to compute group length.
sum or "sum": see sum().
f_slope or "f_slope": to compute the group slope, see f_slope().

'><meta property="og:description" content='Function to aggregate zoo objects within a time series list.
This function supports progress bars generated by the progressr package. See examples.
This function also accepts a parallelization setup via future::plan(), but it might only be worth it for large time series lists.
Objective
Time series aggregation involves grouping observations and summarizing group values with a statistical function. This operation is useful to:
Decrease (downsampling) the temporal resolution of a time series.
Highlight particular states of a time series over time. For example, a daily temperature series can be aggregated by month using max to represent the highest temperatures each month.
Transform irregular time series into regular.


This function aggregates time series lists with overlapping times. Please check such overlap by assessing the columns "begin" and "end " of the data frame resulting from df &amp;lt;- tsl_time(tsl = tsl). Aggregation will be limited by the shortest time series in your time series list. To aggregate non-overlapping time series, please subset the individual components of tsl one by one either using tsl_subset() or the syntax tsl = my_tsl[[i]].
Methods
Any function returning a single number from a numeric vector can be used to aggregate a time series list. Quoted and unquoted function names can be used. Additional arguments to these functions can be passed via the argument .... Typical examples are:

mean or "mean": see mean().
median or "median": see stats::median().
quantile or "quantile": see stats::quantile().
min or "min": see min().
max or "max": see max().
sd or "sd": to compute standard deviation, see stats::sd().
var or "var": to compute the group variance, see stats::var().
length or "length": to compute group length.
sum or "sum": see sum().
f_slope or "f_slope": to compute the group slope, see f_slope().

'><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">distantia</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/psi_dissimilarity_metric.html">The Psi Dissimilarity Metric</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Original Paper</h6></li>
    <li><a class="external-link dropdown-item" href="https://nsojournals.onlinelibrary.wiley.com/doi/full/10.1111/ecog.04895">Benito &amp; Birks 2020 (Ecography)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BlasBenito/distantia/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Aggregate Cases in Time Series Lists</h1>
      <small class="dont-index">Source: <a href="https://github.com/BlasBenito/distantia/blob/main/R/tsl_aggregate.R" class="external-link"><code>R/tsl_aggregate.R</code></a></small>
      <div class="d-none name"><code>tsl_aggregate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to aggregate zoo objects within a time series list.
This function supports progress bars generated by the <code>progressr</code> package. See examples.</p>
<p>This function also accepts a parallelization setup via <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code>, but it might only be worth it for large time series lists.</p>
<p><strong>Objective</strong></p>
<p>Time series aggregation involves grouping observations and summarizing group values with a statistical function. This operation is useful to:</p><ul><li><p>Decrease (downsampling) the temporal resolution of a time series.</p></li>
<li><p>Highlight particular states of a time series over time. For example, a daily temperature series can be aggregated by month using <code>max</code> to represent the highest temperatures each month.</p></li>
<li><p>Transform irregular time series into regular.</p></li>
</ul><p>This function aggregates time series lists <strong>with overlapping times</strong>. Please check such overlap by assessing the columns "begin" and "end " of the data frame resulting from <code>df &lt;- tsl_time(tsl = tsl)</code>. Aggregation will be limited by the shortest time series in your time series list. To aggregate non-overlapping time series, please subset the individual components of <code>tsl</code> one by one either using <code><a href="tsl_subset.html">tsl_subset()</a></code> or the syntax <code>tsl = my_tsl[[i]]</code>.</p>
<p><strong>Methods</strong></p>
<p>Any function returning a single number from a numeric vector can be used to aggregate a time series list. Quoted and unquoted function names can be used. Additional arguments to these functions can be passed via the argument <code>...</code>. Typical examples are:</p>
<ul><li><p><code>mean</code> or <code>"mean"</code>: see <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>.</p></li>
<li><p><code>median</code> or <code>"median"</code>: see <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">stats::median()</a></code>.</p></li>
<li><p><code>quantile</code> or "quantile": see <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">stats::quantile()</a></code>.</p></li>
<li><p><code>min</code> or <code>"min"</code>: see <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min()</a></code>.</p></li>
<li><p><code>max</code> or <code>"max"</code>: see <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code>.</p></li>
<li><p><code>sd</code> or <code>"sd"</code>: to compute standard deviation, see <code><a href="https://rdrr.io/r/stats/sd.html" class="external-link">stats::sd()</a></code>.</p></li>
<li><p><code>var</code> or <code>"var"</code>: to compute the group variance, see <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">stats::var()</a></code>.</p></li>
<li><p><code>length</code> or <code>"length"</code>: to compute group length.</p></li>
<li><p><code>sum</code> or <code>"sum"</code>: see <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code>.</p></li>
<li><p><code>f_slope</code> or <code>"f_slope"</code>: to compute the group slope, see <code><a href="f_slope.html">f_slope()</a></code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tsl_aggregate</span><span class="op">(</span>tsl <span class="op">=</span> <span class="cn">NULL</span>, new_time <span class="op">=</span> <span class="cn">NULL</span>, method <span class="op">=</span> <span class="va">mean</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-tsl">tsl<a class="anchor" aria-label="anchor" href="#arg-tsl"></a></dt>
<dd><p>(required, list) Time series list. Default: NULL</p></dd>


<dt id="arg-new-time">new_time<a class="anchor" aria-label="anchor" href="#arg-new-time"></a></dt>
<dd><p>(required, numeric, numeric vector, Date vector, POSIXct vector, or keyword) Definition of the aggregation pattern. The available options are:</p><ul><li><p>numeric vector: only for the "numeric" time class, defines the breakpoints for time series aggregation.</p></li>
<li><p>"Date" or "POSIXct" vector: as above, but for the time classes "Date" and "POSIXct." In any case, the input vector is coerced to the time class of the <code>tsl</code> argument.</p></li>
<li><p>numeric: defines fixed time intervals in the units of <code>tsl</code> for time series aggregation. Used as is when the time class is "numeric", and coerced to integer and interpreted as days for the time classes "Date" and "POSIXct".</p></li>
<li><p>keyword (see <code><a href="utils_time_units.html">utils_time_units()</a></code>): the common options for the time classes "Date" and "POSIXct" are: "millennia", "centuries", "decades", "years", "quarters", "months", and "weeks". Exclusive keywords for the "POSIXct" time class are: "days", "hours", "minutes", and "seconds". The time class "numeric" accepts keywords coded as scientific numbers, from "1e8" to "1e-8".</p></li>
</ul></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>(required, function name) Name of a standard or custom function to aggregate numeric vectors. Typical examples are <code>mean</code>, <code>max</code>,<code>min</code>, <code>median</code>, and <code>quantile</code>. Default: <code>mean</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>(optional) further arguments for <code>method</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>time series list</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="zoo_aggregate.html">zoo_aggregate()</a></code></p>
<p>Other data_processing:
<code><a href="tsl_resample.html">tsl_resample</a>()</code>,
<code><a href="tsl_split.html">tsl_split</a>()</code>,
<code><a href="tsl_subset.html">tsl_subset</a>()</code>,
<code><a href="tsl_to_df.html">tsl_to_df</a>()</code>,
<code><a href="tsl_transform.html">tsl_transform</a>()</code>,
<code><a href="zoo_aggregate.html">zoo_aggregate</a>()</code>,
<code><a href="zoo_permute.html">zoo_permute</a>()</code>,
<code><a href="zoo_resample.html">zoo_resample</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#parallelization setup (not worth it for this data size)</span></span></span>
<span class="r-in"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/multisession.html" class="external-link">multisession</a></span>,</span></span>
<span class="r-in"><span>  workers <span class="op">=</span> <span class="fl">2</span> <span class="co">#set to parallelly::availableWorkers() - 1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#progress bar</span></span></span>
<span class="r-in"><span><span class="co"># progressr::handlers(global = TRUE)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># daily aggregation</span></span></span>
<span class="r-in"><span><span class="co">#----------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#flight paths of five albatrosses</span></span></span>
<span class="r-in"><span><span class="co">#scaled to improve visualization</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_initialize.html">tsl_initialize</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">albatross</span>,</span></span>
<span class="r-in"><span>  id_column <span class="op">=</span> <span class="st">"id"</span>,</span></span>
<span class="r-in"><span>  time_column <span class="op">=</span> <span class="st">"time"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_transform.html">tsl_transform</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    f <span class="op">=</span> <span class="va">f_scale</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#plot time series</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>    guide_columns <span class="op">=</span> <span class="fl">4</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#check time features</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name rows   class units    length resolution               begin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X132 X132 1231 POSIXct  days  83.81359 0.06814113 2008-06-23 17:58:44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X134 X134 1051 POSIXct  days  70.12556 0.06678624 2008-05-31 14:59:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X136 X136 1401 POSIXct  days  96.81472 0.06915337 2008-06-23 17:58:01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X153 X153 1300 POSIXct  days  84.62737 0.06514809 2008-07-10 23:57:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X156 X156 1506 POSIXct  days 116.37640 0.07732651 2008-06-19 02:58:55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      end     keywords</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X132 2008-09-15 13:30:17 months, ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X134 2008-08-09 18:00:18 months, ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X136 2008-09-28 13:31:13 quarters....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X153 2008-10-03 15:00:56 months, ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X156 2008-10-13 12:00:56 quarters....</span>
<span class="r-in"><span><span class="co">#many observations per day</span></span></span>
<span class="r-in"><span><span class="co">#different starting and ending dates</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#aggregation: mean daily values</span></span></span>
<span class="r-in"><span><span class="va">tsl_daily</span> <span class="op">&lt;-</span> <span class="fu">tsl_aggregate</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  new_time <span class="op">=</span> <span class="st">"days"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="va">mean</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'X132' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'X134' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'X136' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'X153' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'X156' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#check time features</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time</a></span><span class="op">(</span><span class="va">tsl_daily</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      name rows   class units length resolution               begin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X132 X132  135 POSIXct  days    134          1 2008-05-31 14:59:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X134 X134  135 POSIXct  days    134          1 2008-05-31 14:59:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X136 X136  135 POSIXct  days    134          1 2008-05-31 14:59:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X153 X153  135 POSIXct  days    134          1 2008-05-31 14:59:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X156 X156  135 POSIXct  days    134          1 2008-05-31 14:59:31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      end     keywords</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X132 2008-10-12 14:59:31 quarters....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X134 2008-10-12 14:59:31 quarters....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X136 2008-10-12 14:59:31 quarters....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X153 2008-10-12 14:59:31 quarters....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X156 2008-10-12 14:59:31 quarters....</span>
<span class="r-in"><span><span class="co">#one observation per day</span></span></span>
<span class="r-in"><span><span class="co">#same starting and ending dates</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    tsl <span class="op">=</span> <span class="va">tsl_daily</span>,</span></span>
<span class="r-in"><span>    guide_columns <span class="op">=</span> <span class="fl">4</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># other supported keywords</span></span></span>
<span class="r-in"><span><span class="co">#----------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#simulate full range of calendar dates</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_simulate.html">tsl_simulate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  rows <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>  time_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"0000-01-01"</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#mean value by millennia (extreme case!!!)</span></span></span>
<span class="r-in"><span><span class="va">tsl_millennia</span> <span class="op">&lt;-</span> <span class="fu">tsl_aggregate</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  new_time <span class="op">=</span> <span class="st">"millennia"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="va">mean</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'A' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'B' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl_millennia</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#max value by centuries</span></span></span>
<span class="r-in"><span><span class="va">tsl_centuries</span> <span class="op">&lt;-</span> <span class="fu">tsl_aggregate</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  new_time <span class="op">=</span> <span class="st">"centuries"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="va">max</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'A' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'B' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl_centuries</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#quantile 0.75 value by centuries</span></span></span>
<span class="r-in"><span><span class="va">tsl_centuries</span> <span class="op">&lt;-</span> <span class="fu">tsl_aggregate</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  new_time <span class="op">=</span> <span class="st">"centuries"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span>,</span></span>
<span class="r-in"><span>  probs <span class="op">=</span> <span class="fl">0.75</span> <span class="co">#argument of stats::quantile()</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - time in all time series must be of the same class: use lapply(tsl, function(x) class(zoo::index(x))) to identify and remove or modify the objects with a mismatching class.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'A' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming zoo time series from 'B' to ''.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Structural issues:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - list and time series names must match and be unique: reset names with distantia::tsl_names_set().</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl_centuries</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co">#disable parallelization</span></span></span>
<span class="r-in"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/sequential.html" class="external-link">sequential</a></span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

