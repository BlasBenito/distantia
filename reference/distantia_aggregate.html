<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Aggregate Dissimilarity Data Frames Across Parameter Combinations — distantia_aggregate • distantia</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Aggregate Dissimilarity Data Frames Across Parameter Combinations — distantia_aggregate"><meta name="description" content='The functions distantia() and momentum() allow dissimilarity assessments based on several combinations of arguments at once. For example, when the argument distance is set to c("euclidean", "manhattan"), the output data frame will show two dissimilarity scores for each pair of compared time series, one based on euclidean distances, and another based on manhattan distances.
The functions distantia_aggregate() and momentum_aggregate() compute the stats of dissimilarity metrics across combinations of parameters.
When df is the result of distantia(), the input data is grouped by pairs of time series, and the function f is applied to the column "psi" by group
When df is the result of momentum(), the input data is grouped by pairs of time series and variables, and the function f is applied to the columns "importance", "psi_only_with" and "psi_without" by group. However, if the values TRUE and FALSE appear in the column "robust" (which is not allowed by default in momentum()), then the aggregation is cancelled with an error, as the results of both methods should not be aggregated together.
If psi scores smaller than zero occur in the aggregated output, then the the smaller psi value is added to the column psi to start dissimilarity scores at zero.
If there are no different combinations of arguments in the input data frame, no aggregation happens, but all parameter columns are removed.'><meta property="og:description" content='The functions distantia() and momentum() allow dissimilarity assessments based on several combinations of arguments at once. For example, when the argument distance is set to c("euclidean", "manhattan"), the output data frame will show two dissimilarity scores for each pair of compared time series, one based on euclidean distances, and another based on manhattan distances.
The functions distantia_aggregate() and momentum_aggregate() compute the stats of dissimilarity metrics across combinations of parameters.
When df is the result of distantia(), the input data is grouped by pairs of time series, and the function f is applied to the column "psi" by group
When df is the result of momentum(), the input data is grouped by pairs of time series and variables, and the function f is applied to the columns "importance", "psi_only_with" and "psi_without" by group. However, if the values TRUE and FALSE appear in the column "robust" (which is not allowed by default in momentum()), then the aggregation is cancelled with an error, as the results of both methods should not be aggregated together.
If psi scores smaller than zero occur in the aggregated output, then the the smaller psi value is added to the column psi to start dissimilarity scores at zero.
If there are no different combinations of arguments in the input data frame, no aggregation happens, but all parameter columns are removed.'><meta property="og:image" content="https://blasbenito.github.io/distantia/logo.png"><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">distantia</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/dynamic_time_warping_and_lock_step.html">Dynamic Time Warping vs Lock-Step</a></li>
    <li><a class="dropdown-item" href="../articles/time_series_lists.html">Handling Time Series Lists</a></li>
    <li><a class="dropdown-item" href="../articles/mapping_dissimilarity.html">Mapping Time Series Dissimilarity</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Original Paper</h6></li>
    <li><a class="external-link dropdown-item" href="https://nsojournals.onlinelibrary.wiley.com/doi/full/10.1111/ecog.04895">Benito &amp; Birks 2020 (Ecography)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BlasBenito/distantia/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Aggregate Dissimilarity Data Frames Across Parameter Combinations</h1>
      <small class="dont-index">Source: <a href="https://github.com/BlasBenito/distantia/blob/main/R/distantia_aggregate.R" class="external-link"><code>R/distantia_aggregate.R</code></a></small>
      <div class="d-none name"><code>distantia_aggregate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The functions <code><a href="distantia.html">distantia()</a></code> and <code><a href="momentum.html">momentum()</a></code> allow dissimilarity assessments based on several combinations of arguments at once. For example, when the argument <code>distance</code> is set to <code>c("euclidean", "manhattan")</code>, the output data frame will show two dissimilarity scores for each pair of compared time series, one based on euclidean distances, and another based on manhattan distances.</p>
<p>The functions <code>distantia_aggregate()</code> and <code>momentum_aggregate()</code> compute the stats of dissimilarity metrics across combinations of parameters.</p>
<p>When <code>df</code> is the result of <code><a href="distantia.html">distantia()</a></code>, the input data is grouped by pairs of time series, and the function <code>f</code> is applied to the column "psi" by group</p>
<p>When <code>df</code> is the result of <code><a href="momentum.html">momentum()</a></code>, the input data is grouped by pairs of time series and variables, and the function <code>f</code> is applied to the columns "importance", "psi_only_with" and "psi_without" by group. However, if the values TRUE and FALSE appear in the column "robust" (which is not allowed by default in <code><a href="momentum.html">momentum()</a></code>), then the aggregation is cancelled with an error, as the results of both methods should not be aggregated together.</p>
<p>If psi scores smaller than zero occur in the aggregated output, then the the smaller psi value is added to the column <code>psi</code> to start dissimilarity scores at zero.</p>
<p>If there are no different combinations of arguments in the input data frame, no aggregation happens, but all parameter columns are removed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">distantia_aggregate</span><span class="op">(</span>df <span class="op">=</span> <span class="cn">NULL</span>, f <span class="op">=</span> <span class="va">mean</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">momentum_aggregate</span><span class="op">(</span>df <span class="op">=</span> <span class="cn">NULL</span>, f <span class="op">=</span> <span class="va">mean</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>(required, data frame) Output of <code><a href="distantia.html">distantia()</a></code> or <code><a href="momentum.html">momentum()</a></code>. Default: NULL</p></dd>


<dt id="arg-f">f<a class="anchor" aria-label="anchor" href="#arg-f"></a></dt>
<dd><p>(optional, function) Function to summarize psi scores (for example, <code>mean</code>) when there are several combinations of parameters in <code>df</code>. Ignored when there is a single combination of arguments in the input. Default: <code>mean</code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>(optional, arguments of <code>f</code>) Further arguments to pass to the function <code>f</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data frame</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other dissimilarity_analysis:
<code><a href="distantia_boxplot.html">distantia_boxplot</a>()</code>,
<code><a href="distantia_cluster_hclust.html">distantia_cluster_hclust</a>()</code>,
<code><a href="distantia_cluster_kmeans.html">distantia_cluster_kmeans</a>()</code>,
<code><a href="distantia_matrix.html">distantia_matrix</a>()</code>,
<code><a href="distantia_plot.html">distantia_plot</a>()</code>,
<code><a href="distantia_spatial_network.html">distantia_spatial_network</a>()</code>,
<code><a href="distantia_stats.html">distantia_stats</a>()</code>,
<code><a href="distantia_time_shift.html">distantia_time_shift</a>()</code>,
<code><a href="momentum_boxplot.html">momentum_boxplot</a>()</code>,
<code><a href="momentum_stats.html">momentum_stats</a>()</code>,
<code><a href="momentum_to_wide.html">momentum_to_wide</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#three time series</span></span></span>
<span class="r-in"><span><span class="co">#climate and ndvi in Fagus sylvatica stands in Spain, Germany, and Sweden</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_initialize.html">tsl_initialize</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">fagus_dynamics</span>,</span></span>
<span class="r-in"><span>  name_column <span class="op">=</span> <span class="st">"name"</span>,</span></span>
<span class="r-in"><span>  time_column <span class="op">=</span> <span class="st">"time"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_transform.html">tsl_transform</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    f <span class="op">=</span> <span class="va">f_scale_global</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>    guide_columns <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#distantia with multiple parameter combinations</span></span></span>
<span class="r-in"><span><span class="co">#-------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="distantia.html">distantia</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  distance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"euclidean"</span>, <span class="st">"manhattan"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  lock_step <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"x"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"distance"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"psi"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         x      y  distance       psi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Germany Sweden euclidean 0.8576700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Germany Sweden manhattan 0.8591195</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Germany  Spain manhattan 1.2698922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Germany  Spain euclidean 1.3061327</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Spain Sweden euclidean 1.4708497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   Spain Sweden manhattan 1.4890286</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#aggregation using means</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">distantia_aggregate</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  f <span class="op">=</span> <span class="va">mean</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         x      y       psi</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Germany  Spain 1.2880125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Germany Sweden 0.8583947</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Spain Sweden 1.4799391</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#momentum with multiple parameter combinations</span></span></span>
<span class="r-in"><span><span class="co">#-------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="momentum.html">momentum</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  distance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"euclidean"</span>, <span class="st">"manhattan"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  lock_step <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"x"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"variable"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"distance"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"importance"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          x      y    variable  distance importance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Germany  Spain         evi euclidean   0.241829</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  Germany  Spain    rainfall euclidean  19.051052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Germany  Spain temperature euclidean -30.814944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Germany Sweden         evi euclidean  28.539736</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Germany Sweden    rainfall euclidean  -4.845232</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Germany Sweden temperature euclidean -25.011608</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    Spain Sweden         evi euclidean -22.912397</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    Spain Sweden    rainfall euclidean   9.732110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    Spain Sweden temperature euclidean  12.501949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Germany  Spain         evi manhattan   1.900935</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Germany  Spain    rainfall manhattan  21.154702</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Germany  Spain temperature manhattan -29.727709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 Germany Sweden         evi manhattan  29.249949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 Germany Sweden    rainfall manhattan  -3.444891</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 Germany Sweden temperature manhattan -26.684626</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   Spain Sweden         evi manhattan -25.080233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   Spain Sweden    rainfall manhattan  10.764640</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   Spain Sweden temperature manhattan  12.742187</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#aggregation using means</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">momentum_aggregate</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  f <span class="op">=</span> <span class="va">mean</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"x"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"variable"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"importance"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         x      y    variable importance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Germany  Spain         evi   1.071382</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Germany Sweden         evi  28.894843</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Spain Sweden         evi -23.996315</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Germany  Spain    rainfall  20.102877</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Germany Sweden    rainfall  -4.145061</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   Spain Sweden    rainfall  10.248375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 Germany  Spain temperature -30.271327</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 Germany Sweden temperature -25.848117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   Spain Sweden temperature  12.622068</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

