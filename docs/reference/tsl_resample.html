<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Resampling of Time Series Lists — tsl_resample • distantia</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Resampling of Time Series Lists — tsl_resample"><meta property="og:description" content='Function to resample zoo objects within a time series list.
This function supports progress bars generated by the progressr package. See examples.
This function also accepts a parallelization setup via future::plan(), but it might only be worth it for large time series lists.
Objective
Time series resampling involves interpolating new values for time steps not available in the original time series. This operation is useful to:
Transform irregular time series into regular.
Align time series with different temporal resolutions.
Increase (upsampling) or decrease (downsampling) the temporal resolution of a time series.


Time series resampling should not be used to extrapolate new values outside of the original time range of the time series, or to increase the resolution of a time series by a factor of two or more. These operations are known to produce non-sensical results.
Warning: This function resamples time series lists with overlapping times. Please check such overlap by assessing the columns "begin" and "end " of the data frame resulting from df &amp;lt;- tsl_time(tsl = tsl). Resampling will be limited by the shortest time series in your time series list. To resample non-overlapping time series, please subset the individual components of tsl one by one either using tsl_subset() or the syntax tsl = my_tsl[[i]].
Methods
This function offers three methods for time series interpolation:

"linear" (default): interpolation via piecewise linear regression as implemented in zoo::na.approx().
"spline": cubic smoothing spline regression as implemented in stats::smooth.spline().
"loess": local polynomial regression fitting as implemented in stats::loess().


These methods are used to fit models y ~ x where y represents the values of a univariate time series and x represents a numeric version of its time.
The functions utils_optimize_spline() and utils_optimize_loess() are used under the hood to optimize the complexity of the methods "spline" and "loess" by finding the configuration that minimizes the root mean squared error (RMSE) between  observed and predicted y. However, when the argument max_complexity = TRUE, the complexity optimization is ignored, and a maximum complexity model is used instead.
New time
The argument new_time offers several alternatives to help define the new time of the resulting time series:

NULL: the target time series (x) is resampled to a regular time within its original time range and number of observations.
zoo object: a zoo object to be used as template for resampling. Useful when the objective is equalizing the frequency of two separate zoo objects.
time series list: a time series list to be used as template. The range of overlapping dates and the average resolution are used to generate the new resampling time. This method cannot be used to align two time series lists, unless the template is resampled beforehand.
time vector: a time vector of a class compatible with the time in x.
keyword: character string defining a resampling keyword, obtained via zoo_time(x, keywords = "resample")$keywords..
numeric: a single number representing the desired interval between consecutive samples in the units of x (relevant units can be obtained via zoo_time(x)$units).


Step by Step
The steps to resample a time series list are:

The time interpolation range is computed from the intersection of all times in tsl. This step ensures that no extrapolation occurs during resampling, but it also makes resampling of non-overlapping time series impossible.
If new_time is provided, any values of new_time outside of the minimum and maximum interpolation times are removed to avoid extrapolation. If new_time is not provided, a regular time within the interpolation time range with the length of the shortest time series in tsl is generated.
For each univariate time time series, a model y ~ x, where y is the time series and x is its own time coerced to numeric is fitted.
If max_complexity == FALSE, the model with the complexity that minimizes the root mean squared error between the observed and predicted y is returned.
If max_complexity == TRUE and method = "spline" or method = "loess", the first valid model closest to a maximum complexity is returned.

The fitted model is predicted over new_time to generate the resampled time series.


Other Details
Please use this operation with care, as there are limits to the amount of resampling that can be done without distorting the data. The safest option is to keep the distance between new time points within the same magnitude of the distance between the old time points.
This function accepts a parallelization setup via future::plan(), but it is only relevant for very large datasets when max_complexity = FALSE and method = "loess" or method = "spline".'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">distantia</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/blasbenito/distantia/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Resampling of Time Series Lists</h1>
    <small class="dont-index">Source: <a href="https://github.com/blasbenito/distantia/blob/HEAD/R/tsl_resample.R" class="external-link"><code>R/tsl_resample.R</code></a></small>
    <div class="hidden name"><code>tsl_resample.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to resample zoo objects within a time series list.</p>
<p>This function supports progress bars generated by the <code>progressr</code> package. See examples.</p>
<p>This function also accepts a parallelization setup via <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code>, but it might only be worth it for large time series lists.</p>
<p><strong>Objective</strong></p>
<p>Time series resampling involves interpolating new values for time steps not available in the original time series. This operation is useful to:</p><ul><li><p>Transform irregular time series into regular.</p></li>
<li><p>Align time series with different temporal resolutions.</p></li>
<li><p>Increase (upsampling) or decrease (downsampling) the temporal resolution of a time series.</p></li>
</ul><p>Time series resampling <strong>should not be used</strong> to extrapolate new values outside of the original time range of the time series, or to increase the resolution of a time series by a factor of two or more. These operations are known to produce non-sensical results.</p>
<p><strong>Warning</strong>: This function resamples time series lists <strong>with overlapping times</strong>. Please check such overlap by assessing the columns "begin" and "end " of the data frame resulting from <code>df &lt;- tsl_time(tsl = tsl)</code>. Resampling will be limited by the shortest time series in your time series list. To resample non-overlapping time series, please subset the individual components of <code>tsl</code> one by one either using <code><a href="tsl_subset.html">tsl_subset()</a></code> or the syntax <code>tsl = my_tsl[[i]]</code>.</p>
<p><strong>Methods</strong></p>
<p>This function offers three methods for time series interpolation:</p>
<ul><li><p>"linear" (default): interpolation via piecewise linear regression as implemented in <code><a href="https://rdrr.io/pkg/zoo/man/na.approx.html" class="external-link">zoo::na.approx()</a></code>.</p></li>
<li><p>"spline": cubic smoothing spline regression as implemented in <code><a href="https://rdrr.io/r/stats/smooth.spline.html" class="external-link">stats::smooth.spline()</a></code>.</p></li>
<li><p>"loess": local polynomial regression fitting as implemented in <code><a href="https://rdrr.io/r/stats/loess.html" class="external-link">stats::loess()</a></code>.</p></li>
</ul><p>These methods are used to fit models <code>y ~ x</code> where <code>y</code> represents the values of a univariate time series and <code>x</code> represents a numeric version of its time.</p>
<p>The functions <code><a href="utils_optimize_spline.html">utils_optimize_spline()</a></code> and <code><a href="utils_optimize_loess.html">utils_optimize_loess()</a></code> are used under the hood to optimize the complexity of the methods "spline" and "loess" by finding the configuration that minimizes the root mean squared error (RMSE) between  observed and predicted <code>y</code>. However, when the argument <code>max_complexity = TRUE</code>, the complexity optimization is ignored, and a maximum complexity model is used instead.</p>
<p><strong>New time</strong></p>
<p>The argument <code>new_time</code> offers several alternatives to help define the new time of the resulting time series:</p>
<ul><li><p><code>NULL</code>: the target time series (<code>x</code>) is resampled to a regular time within its original time range and number of observations.</p></li>
<li><p><code>zoo object</code>: a zoo object to be used as template for resampling. Useful when the objective is equalizing the frequency of two separate zoo objects.</p></li>
<li><p><code>time series list</code>: a time series list to be used as template. The range of overlapping dates and the average resolution are used to generate the new resampling time. This method cannot be used to align two time series lists, unless the template is resampled beforehand.</p></li>
<li><p><code>time vector</code>: a time vector of a class compatible with the time in <code>x</code>.</p></li>
<li><p><code>keyword</code>: character string defining a resampling keyword, obtained via <code>zoo_time(x, keywords = "resample")$keywords</code>..</p></li>
<li><p><code>numeric</code>: a single number representing the desired interval between consecutive samples in the units of <code>x</code> (relevant units can be obtained via <code>zoo_time(x)$units</code>).</p></li>
</ul><p><strong>Step by Step</strong></p>
<p>The steps to resample a time series list are:</p>
<ol><li><p>The time interpolation range is computed from the intersection of all times in <code>tsl</code>. This step ensures that no extrapolation occurs during resampling, but it also makes resampling of non-overlapping time series impossible.</p></li>
<li><p>If <code>new_time</code> is provided, any values of <code>new_time</code> outside of the minimum and maximum interpolation times are removed to avoid extrapolation. If <code>new_time</code> is not provided, a regular time within the interpolation time range with the length of the shortest time series in <code>tsl</code> is generated.</p></li>
<li><p>For each univariate time time series, a model <code>y ~ x</code>, where <code>y</code> is the time series and <code>x</code> is its own time coerced to numeric is fitted.</p><ul><li><p>If <code>max_complexity == FALSE</code>, the model with the complexity that minimizes the root mean squared error between the observed and predicted <code>y</code> is returned.</p></li>
<li><p>If <code>max_complexity == TRUE</code> and <code>method = "spline"</code> or <code>method = "loess"</code>, the first valid model closest to a maximum complexity is returned.</p></li>
</ul></li>
<li><p>The fitted model is predicted over <code>new_time</code> to generate the resampled time series.</p></li>
</ol><p><strong>Other Details</strong></p>
<p>Please use this operation with care, as there are limits to the amount of resampling that can be done without distorting the data. The safest option is to keep the distance between new time points within the same magnitude of the distance between the old time points.</p>
<p>This function accepts a parallelization setup via <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code>, but it is only relevant for very large datasets when <code>max_complexity = FALSE</code> and <code>method = "loess"</code> or <code>method = "spline"</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tsl_resample</span><span class="op">(</span></span>
<span>  tsl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"linear"</span>,</span>
<span>  max_complexity <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-tsl">tsl<a class="anchor" aria-label="anchor" href="#arg-tsl"></a></dt>
<dd><p>(required, list) Time series list. Default: NULL</p></dd>


<dt id="arg-new-time">new_time<a class="anchor" aria-label="anchor" href="#arg-new-time"></a></dt>
<dd><p>(required, zoo object, time series list, character string, time vector, numeric) New time to resample to. If a time vector is provided, it must be of a class compatible with the time of <code>tsl</code>.  If a zoo object or time series list is provided, its time is used as a template to resample <code>tsl</code>. Valid resampling keywords (see <code><a href="tsl_time.html">tsl_time()</a></code>) are allowed. Numeric values are interpreted as interval widths in the time units of the time series. If NULL, irregular time series are predicted into a regular version of their own time. Default: NULL</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>(optional, character string) Name of the method to resample the time series. One of "linear", "spline" or "loess". Default: "linear".</p></dd>


<dt id="arg-max-complexity">max_complexity<a class="anchor" aria-label="anchor" href="#arg-max-complexity"></a></dt>
<dd><p>(required, logical). Only relevant for methods "spline" and "loess". If TRUE, model optimization is ignored, and the a model of maximum complexity (an overfitted model) is used for resampling. Default: FALSE</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>time series list</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="zoo_resample.html">zoo_resample()</a></code></p>
<p>Other tsl_manipulation:
<code><a href="tsl_aggregate.html">tsl_aggregate</a>()</code>,
<code><a href="tsl_colnames_clean.html">tsl_colnames_clean</a>()</code>,
<code><a href="tsl_colnames_set.html">tsl_colnames_set</a>()</code>,
<code><a href="tsl_names_clean.html">tsl_names_clean</a>()</code>,
<code><a href="tsl_names_set.html">tsl_names_set</a>()</code>,
<code><a href="tsl_split.html">tsl_split</a>()</code>,
<code><a href="tsl_subset.html">tsl_subset</a>()</code>,
<code><a href="tsl_to_df.html">tsl_to_df</a>()</code>,
<code><a href="tsl_transform.html">tsl_transform</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#parallelization setup (not worth it for this data size)</span></span></span>
<span class="r-in"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span></span></span>
<span class="r-in"><span> <span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/multisession.html" class="external-link">multisession</a></span>,</span></span>
<span class="r-in"><span> workers <span class="op">=</span> <span class="fl">2</span> <span class="co">#set to parallelly::availableWorkers() - 1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#progress bar</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">progressr</span><span class="fu">::</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span>global <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#generate irregular time series</span></span></span>
<span class="r-in"><span><span class="va">tsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_simulate.html">tsl_simulate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  rows <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  irregular <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#range of times between samples</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time_summary</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span><span class="op">[</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"units"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_min"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_max"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $units</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "days"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 155.599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 9.152882</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#resample to regular using linear interpolation</span></span></span>
<span class="r-in"><span><span class="va">tsl_regular</span> <span class="op">&lt;-</span> <span class="fu">tsl_resample</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Resampling 'tsl' with a regular version of its own time.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl_regular</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#check new resolution</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time_summary</a></span><span class="op">(</span><span class="va">tsl_regular</span><span class="op">)</span><span class="op">[</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"units"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_min"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_max"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $units</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "days"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 35.59454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 35.59454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#resample using keywords</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#valid resampling keywords</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time_summary</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  keywords <span class="op">=</span> <span class="st">"resample"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">$</span><span class="va">keywords</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "quarters" "months"   "weeks"   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#by month</span></span></span>
<span class="r-in"><span><span class="va">tsl_months</span> <span class="op">&lt;-</span> <span class="fu">tsl_resample</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  new_time <span class="op">=</span> <span class="st">"months"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl_months</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#by week</span></span></span>
<span class="r-in"><span><span class="va">tsl_weeks</span> <span class="op">&lt;-</span> <span class="fu">tsl_resample</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  new_time <span class="op">=</span> <span class="st">"weeks"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl_weeks</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#resample using time interval</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#get relevant units</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time</a></span><span class="op">(</span><span class="va">tsl</span><span class="op">)</span><span class="op">$</span><span class="va">units</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "days" "days"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#resampling to 15 days intervals</span></span></span>
<span class="r-in"><span><span class="va">tsl_15_days</span> <span class="op">&lt;-</span> <span class="fu">tsl_resample</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl</span>,</span></span>
<span class="r-in"><span>  new_time <span class="op">=</span> <span class="fl">15</span> <span class="co">#days</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time_summary</a></span><span class="op">(</span><span class="va">tsl_15_days</span><span class="op">)</span><span class="op">[</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"units"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_min"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_max"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $units</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "days"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="tsl_plot.html">tsl_plot</a></span><span class="op">(</span><span class="va">tsl_15_days</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#aligning two time series listsç</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#two time series lists with different time ranges</span></span></span>
<span class="r-in"><span><span class="va">tsl1</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_simulate.html">tsl_simulate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  rows <span class="op">=</span> <span class="fl">80</span>,</span></span>
<span class="r-in"><span>  time_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2010-01-01"</span>, <span class="st">"2020-01-01"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  irregular <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tsl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="tsl_simulate.html">tsl_simulate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  rows <span class="op">=</span> <span class="fl">120</span>,</span></span>
<span class="r-in"><span>  time_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2005-01-01"</span>, <span class="st">"2024-01-01"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  irregular <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#check time features</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time_summary</a></span><span class="op">(</span><span class="va">tsl1</span><span class="op">)</span><span class="op">[</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"begin"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"end"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_min"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_max"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $begin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2010-01-01"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $end</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-10-12"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 206.069</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 11.44828</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time_summary</a></span><span class="op">(</span><span class="va">tsl2</span><span class="op">)</span><span class="op">[</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"begin"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"end"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_min"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_max"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $begin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2005-01-29"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $end</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2023-12-17"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 593.9436</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 14.48643</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#tsl1 to regular</span></span></span>
<span class="r-in"><span><span class="va">tsl1_regular</span> <span class="op">&lt;-</span> <span class="fu">tsl_resample</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Resampling 'tsl' with a regular version of its own time.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#tsl2 resampled to time of tsl1_regular</span></span></span>
<span class="r-in"><span><span class="va">tsl2_regular</span> <span class="op">&lt;-</span> <span class="fu">tsl_resample</span><span class="op">(</span></span></span>
<span class="r-in"><span>  tsl <span class="op">=</span> <span class="va">tsl2</span>,</span></span>
<span class="r-in"><span>  new_time <span class="op">=</span> <span class="va">tsl1_regular</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#check alignment</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time_summary</a></span><span class="op">(</span><span class="va">tsl1_regular</span><span class="op">)</span><span class="op">[</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"begin"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"end"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_min"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_max"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $begin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2010-01-12"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $end</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-09-08"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 44.63378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 44.63378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="tsl_time.html">tsl_time_summary</a></span><span class="op">(</span><span class="va">tsl2_regular</span><span class="op">)</span><span class="op">[</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"begin"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"end"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_min"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"resolution_max"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $begin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2010-01-12"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $end</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2019-09-08"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_min</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 44.63378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $resolution_max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 44.63378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#disable parallelization</span></span></span>
<span class="r-in"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/sequential.html" class="external-link">sequential</a></span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Blas M. Benito.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

